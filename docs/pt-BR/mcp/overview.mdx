---
title: 'Servidores MCP como Ferramentas no CrewAI'
description: 'Saiba como integrar servidores MCP como ferramentas em seus agentes CrewAI usando a biblioteca `crewai-tools`.'
icon: plug
---

## Vis√£o Geral

O [Model Context Protocol](https://modelcontextprotocol.io/introduction) (MCP) fornece uma maneira padronizada para agentes de IA fornecerem contexto para LLMs ao se comunicarem com servi√ßos externos, conhecidos como Servidores MCP.
A biblioteca `crewai-tools` expande as capacidades do CrewAI ao permitir que voc√™ integre facilmente ferramentas desses servidores MCP aos seus agentes.
Isso oferece √†s suas crews acesso a um vasto ecossistema de funcionalidades.

Atualmente, oferecemos suporte aos seguintes mecanismos de transporte:

- **Stdio**: para servidores locais (comunica√ß√£o via entrada/sa√≠da padr√£o entre processos na mesma m√°quina)
- **Server-Sent Events (SSE)**: para servidores remotos (transmiss√£o de dados unidirecional e em tempo real do servidor para o cliente via HTTP)
- **Streamable HTTP**: para servidores remotos (comunica√ß√£o flex√≠vel e potencialmente bidirecional via HTTP, geralmente utilizando SSE para fluxos do servidor para o cliente)

## Tutorial em V√≠deo
Assista a este tutorial em v√≠deo para um guia completo sobre integra√ß√£o MCP com o CrewAI:

<iframe
  width="100%"
  height="400"
  src="https://www.youtube.com/embed/TpQ45lAZh48"
  title="CrewAI MCP Integration Guide"
  frameborder="0"
  style={{ borderRadius: '10px' }}
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowfullscreen
></iframe>

## Instala√ß√£o

Antes de come√ßar a usar o MCP com o `crewai-tools`, voc√™ precisa instalar a depend√™ncia extra `mcp` do `crewai-tools` com o seguinte comando:

```shell
uv pip install 'crewai-tools[mcp]'
```

## Conceitos-Chave & Primeiros Passos

A classe `MCPServerAdapter` do `crewai-tools` √© a principal forma de se conectar a um servidor MCP e disponibilizar suas ferramentas para os seus agentes CrewAI. Ela oferece suporte a diferentes mecanismos de transporte e simplifica o gerenciamento das conex√µes.

Utilizar um gerenciador de contexto do Python (com a instru√ß√£o `with`) √© a **abordagem recomendada** para o `MCPServerAdapter`. O gerenciamento de iniciar e parar a conex√£o com o servidor MCP √© feito automaticamente.

```python
from crewai import Agent
from crewai_tools import MCPServerAdapter
from mcp import StdioServerParameters # Para servidor Stdio

# Exemplo de server_params (escolha um baseado no tipo de servidor):
# 1. Servidor Stdio:
server_params=StdioServerParameters(
    command="python3",
    args=["servers/your_server.py"],
    env={"UV_PYTHON": "3.12", **os.environ},
)

# 2. Servidor SSE:
server_params = {
    "url": "http://localhost:8000/sse",
    "transport": "sse"
}

# 3. Servidor Streamable HTTP:
server_params = {
    "url": "http://localhost:8001/mcp",
    "transport": "streamable-http"
}

# Exemplo de uso (descomente e adapte assim que definir server_params):
with MCPServerAdapter(server_params) as mcp_tools:
    print(f"Available tools: {[tool.name for tool in mcp_tools]}")

    my_agent = Agent(
        role="MCP Tool User",
        goal="Utilize tools from an MCP server.",
        backstory="I can connect to MCP servers and use their tools.",
        tools=mcp_tools, # Pass the loaded tools to your agent
        reasoning=True,
        verbose=True
    )
    # ... resto da configura√ß√£o da sua crew ...
```
Esse padr√£o geral mostra como integrar ferramentas. Para exemplos espec√≠ficos adaptados a cada transporte, consulte os guias detalhados abaixo.

## Filtrando Ferramentas

```python
with MCPServerAdapter(server_params) as mcp_tools:
    print(f"Available tools: {[tool.name for tool in mcp_tools]}")

    my_agent = Agent(
        role="MCP Tool User",
        goal="Utilize tools from an MCP server.",
        backstory="I can connect to MCP servers and use their tools.",
        tools=mcp_tools["tool_name"], # Pass the loaded tools to your agent
        reasoning=True,
        verbose=True
    )
    # ... resto da configura√ß√£o da sua crew ...
```
## Explorar Integra√ß√µes MCP

<CardGroup cols={2}>
  <Card
    title="Transporte Stdio"
    icon="server"
    href="/pt-BR/mcp/stdio"
    color="#3B82F6"
  >
    Conecte-se a servidores MCP locais via entrada/sa√≠da padr√£o. Ideal para scripts e execut√°veis locais.
  </Card>
  <Card
    title="Transporte SSE"
    icon="wifi"
    href="/pt-BR/mcp/sse"
    color="#10B981"
  >
    Integre-se com servidores MCP remotos utilizando Server-Sent Events para transmiss√£o de dados em tempo real.
  </Card>
  <Card
    title="Transporte Streamable HTTP"
    icon="globe"
    href="/pt-BR/mcp/streamable-http"
    color="#F59E0B"
  >
    Utilize o flex√≠vel Streamable HTTP para comunica√ß√£o robusta com servidores MCP remotos.
  </Card>
  <Card
    title="Conectando a M√∫ltiplos Servidores"
    icon="layer-group"
    href="/pt-BR/mcp/multiple-servers"
    color="#8B5CF6"
  >
    Agregue ferramentas de v√°rios servidores MCP simultaneamente usando um √∫nico adapter.
  </Card>
  <Card
    title="Considera√ß√µes de Seguran√ßa"
    icon="lock"
    href="/pt-BR/mcp/security"
    color="#EF4444"
  >
    Reveja as principais pr√°ticas recomendadas de seguran√ßa para integra√ß√£o do MCP e mantenha seus agentes protegidos.
  </Card>
</CardGroup>

Confira este reposit√≥rio para demonstra√ß√µes completas e exemplos de integra√ß√£o do MCP com CrewAI! üëá

<Card
title="Reposit√≥rio GitHub"
icon="github"
href="https://github.com/tonykipkemboi/crewai-mcp-demo"
target="_blank"
>
Demo CrewAI MCP
</Card>

## Mantendo-se Seguro com MCP
<Warning>
Sempre garanta que voc√™ confia em um Servidor MCP antes de utiliz√°-lo.
</Warning>

#### Aviso de Seguran√ßa: Ataques de DNS Rebinding
Transporte SSE pode ser vulner√°vel a ataques de DNS rebinding se n√£o estiver devidamente protegido.
Para evitar isso:

1. **Sempre valide os cabe√ßalhos Origin** em conex√µes SSE recebidas para garantir que v√™m de fontes esperadas
2. **Evite associar servidores a todas as interfaces de rede** (0.0.0.0) quando estiver rodando localmente ‚Äì prefira associar apenas ao localhost (127.0.0.1)
3. **Implemente autentica√ß√£o adequada** para todas as conex√µes SSE

Sem essas prote√ß√µes, atacantes podem utilizar DNS rebinding para interagir com servidores MCP locais a partir de sites remotos.

Para mais detalhes, veja a [documenta√ß√£o de seguran√ßa de transporte MCP da Anthropic](https://modelcontextprotocol.io/docs/concepts/transports#security-considerations).

### Limita√ß√µes
*   **Primitivas Suportadas**: Atualmente, o `MCPServerAdapter` suporta principalmente a adapta√ß√£o de `tools` MCP. Outras primitivas MCP como `prompts` ou `resources` n√£o s√£o integradas diretamente como componentes do CrewAI atrav√©s desse adapter por enquanto.
*   **Processamento de Sa√≠da**: O adapter normalmente processa a sa√≠da de texto principal de uma ferramenta MCP (por exemplo, `.content[0].text`). Sa√≠das complexas ou multimodais podem exigir tratamento personalizado se n√£o se enquadrarem nesse padr√£o.
