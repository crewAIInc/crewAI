---
title: "Gmail Trigger"
description: "Trigger automations when Gmail events occur (e.g., new emails, labels)."
icon: "envelope"
mode: "wide"
---

## Overview

Use the Gmail Trigger to kick off your deployed crews when Gmail events happen in connected accounts, such as receiving a new email or messages matching a label/filter.

<Tip>
  Make sure Gmail is connected in Tools & Integrations and the trigger is
  enabled for your deployment.
</Tip>

## Enabling the Gmail Trigger

1. Open your deployment in CrewAI AMP
2. Go to the **Triggers** tab
3. Locate **Gmail** and switch the toggle to enable

<Frame>
  <img
    src="/images/enterprise/trigger-selected.png"
    alt="Enable or disable triggers with toggle"
  />
</Frame>

## Example: Process new emails

When a new email arrives, the Gmail Trigger will send the payload to your Crew or Flow. Below is a Crew example that parses and processes the trigger payload.

```python
@CrewBase
class GmailProcessingCrew:
    @agent
    def parser(self) -> Agent:
        return Agent(
            config=self.agents_config['parser'],
        )

    @task
    def parse_gmail_payload(self) -> Task:
        return Task(
            config=self.tasks_config['parse_gmail_payload'],
            agent=self.parser(),
        )

    @task
    def act_on_email(self) -> Task:
        return Task(
            config=self.tasks_config['act_on_email'],
            agent=self.parser(),
        )
```

The Gmail payload will be available via the standard context mechanisms.

### Testando Localmente

Teste sua integração de trigger do Gmail localmente usando a CLI da CrewAI:

```bash
# Visualize todos os triggers disponíveis
crewai triggers list

# Simule um trigger do Gmail com payload realista
crewai triggers run gmail/new_email_received
```

O comando `crewai triggers run` executará sua crew com um payload completo do Gmail, permitindo que você teste sua lógica de parsing antes do deployment.

<Warning>
  Use `crewai triggers run gmail/new_email_received` (não `crewai run`) para
  simular execução de trigger durante o desenvolvimento. Após o deployment, sua
  crew receberá automaticamente o payload do trigger.
</Warning>

## Monitoring Executions

Track history and performance of triggered runs:

<Frame>
  <img
    src="/images/enterprise/list-executions.png"
    alt="List of executions triggered by automation"
  />
</Frame>

## Troubleshooting

- Ensure Gmail is connected in Tools & Integrations
- Verify the Gmail Trigger is enabled on the Triggers tab
- Teste localmente com `crewai triggers run gmail/new_email_received` para ver a estrutura exata do payload
- Check the execution logs and confirm the payload is passed as `crewai_trigger_payload`
- Lembre-se: use `crewai triggers run` (não `crewai run`) para simular execução de trigger
