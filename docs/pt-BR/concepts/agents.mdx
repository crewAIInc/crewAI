---
title: Agentes
description: Guia detalhado sobre como criar e gerenciar agentes no framework CrewAI.
icon: robot
---

## Vis√£o Geral de um Agente

No framework CrewAI, um `Agent` √© uma unidade aut√¥noma que pode:
- Executar tarefas espec√≠ficas
- Tomar decis√µes com base em seu papel e objetivo
- Utilizar ferramentas para alcan√ßar objetivos
- Comunicar e colaborar com outros agentes
- Manter a mem√≥ria de intera√ß√µes
- Delegar tarefas, quando permitido

<Tip>
Pense em um agente como um membro especializado da equipe com habilidades, compet√™ncias e responsabilidades espec√≠ficas. Por exemplo, um agente `Researcher` pode ser excelente em coletar e analisar informa√ß√µes, enquanto um agente `Writer` pode ser melhor na cria√ß√£o de conte√∫do.
</Tip>

<Note type="info" title="Aprimoramento Empresarial: Construtor Visual de Agentes">
O CrewAI Enterprise inclui um Construtor Visual de Agentes, que simplifica a cria√ß√£o e configura√ß√£o de agentes sem escrever c√≥digo. Projete seus agentes visualmente e teste-os em tempo real.

![Visual Agent Builder Screenshot](/images/enterprise/crew-studio-interface.png)

O Construtor Visual de Agentes permite:
- Configura√ß√£o intuitiva de agentes com interfaces baseadas em formul√°rios
- Testes e valida√ß√£o em tempo real
- Biblioteca de modelos com tipos de agentes pr√©-configurados
- F√°cil personaliza√ß√£o de atributos e comportamentos do agente
</Note>

## Atributos do Agente

| Atributo                               | Par√¢metro                | Tipo                          | Descri√ß√£o                                                                                                          |
| :-------------------------------------- | :----------------------- | :---------------------------- | :----------------------------------------------------------------------------------------------------------------- |
| **Role (Fun√ß√£o)**                      | `role`                   | `str`                         | Define a fun√ß√£o e a √°rea de especializa√ß√£o do agente dentro da equipe.                                              |
| **Goal (Objetivo)**                     | `goal`                   | `str`                         | O objetivo individual que guia a tomada de decis√£o do agente.                                                       |
| **Backstory (Hist√≥ria de fundo)**       | `backstory`              | `str`                         | Fornece contexto e personalidade ao agente, enriquecendo as intera√ß√µes.                                             |
| **LLM** _(opcional)_                    | `llm`                    | `Union[str, LLM, Any]`        | Modelo de linguagem que alimenta o agente. Padr√£o: modelo especificado em `OPENAI_MODEL_NAME` ou "gpt-4".           |
| **Tools (Ferramentas)** _(opcional)_    | `tools`                  | `List[BaseTool]`              | Capacidades ou fun√ß√µes dispon√≠veis para o agente. Padr√£o: lista vazia.                                              |
| **Function Calling LLM** _(opcional)_   | `function_calling_llm`   | `Optional[Any]`               | Modelo de linguagem usado para chamada de ferramentas, sobrescreve LLM principal se especificado.                   |
| **Max Iterations** _(opcional)_         | `max_iter`               | `int`                         | N√∫mero m√°ximo de itera√ß√µes antes do agente fornecer sua melhor resposta. Padr√£o: 20.                                 |
| **Max RPM** _(opcional)_                | `max_rpm`                | `Optional[int]`               | Quantidade m√°xima de requisi√ß√µes por minuto para evitar limites de taxa.                                             |
| **Max Execution Time** _(opcional)_     | `max_execution_time`     | `Optional[int]`               | Tempo m√°ximo (em segundos) de execu√ß√£o da tarefa.                                                                   |
| **Verbose** _(opcional)_                | `verbose`                | `bool`                        | Habilita logs detalhados de execu√ß√£o para depura√ß√£o. Padr√£o: False.                                                 |
| **Allow Delegation** _(opcional)_       | `allow_delegation`       | `bool`                        | Permite que o agente delegue tarefas para outros agentes. Padr√£o: False.                                            |
| **Step Callback** _(opcional)_          | `step_callback`          | `Optional[Any]`               | Fun√ß√£o chamada ap√≥s cada passo do agente, sobrescreve callback da equipe.                                           |
| **Cache** _(opcional)_                  | `cache`                  | `bool`                        | Ativa cache para o uso de ferramentas. Padr√£o: True.                                                                |
| **System Template** _(opcional)_        | `system_template`        | `Optional[str]`               | Template personalizado de prompt de sistema para o agente.                                                          |
| **Prompt Template** _(opcional)_        | `prompt_template`        | `Optional[str]`               | Template de prompt personalizado para o agente.                                                                     |
| **Response Template** _(opcional)_      | `response_template`      | `Optional[str]`               | Template de resposta personalizado para o agente.                                                                   |
| **Allow Code Execution** _(opcional)_   | `allow_code_execution`   | `Optional[bool]`              | Ativa execu√ß√£o de c√≥digo pelo agente. Padr√£o: False.                                                                |
| **Max Retry Limit** _(opcional)_        | `max_retry_limit`        | `int`                         | N√∫mero m√°ximo de tentativas (retries) em caso de erro. Padr√£o: 2.                                                   |
| **Respect Context Window** _(opcional)_ | `respect_context_window` | `bool`                        | Mant√©m as mensagens dentro do tamanho da janela de contexto, resumindo quando necess√°rio. Padr√£o: True.             |
| **Code Execution Mode** _(opcional)_    | `code_execution_mode`    | `Literal["safe", "unsafe"]`   | Modo de execu√ß√£o de c√≥digo: 'safe' (usando Docker) ou 'unsafe' (direto). Padr√£o: 'safe'.                            |
| **Multimodal** _(opcional)_             | `multimodal`             | `bool`                        | Se o agente suporta capacidades multimodais. Padr√£o: False.                                                         |
| **Inject Date** _(opcional)_            | `inject_date`            | `bool`                        | Se deve injetar automaticamente a data atual nas tarefas. Padr√£o: False.                                            |
| **Date Format** _(opcional)_            | `date_format`            | `str`                         | Formato de data utilizado quando `inject_date` est√° ativo. Padr√£o: "%Y-%m-%d" (formato ISO).                        |
| **Reasoning** _(opcional)_              | `reasoning`              | `bool`                        | Se o agente deve refletir e criar um plano antes de executar uma tarefa. Padr√£o: False.                             |
| **Max Reasoning Attempts** _(opcional)_ | `max_reasoning_attempts` | `Optional[int]`               | N√∫mero m√°ximo de tentativas de racioc√≠nio antes de executar a tarefa. Se None, tentar√° at√© estar pronto.            |
| **Embedder** _(opcional)_               | `embedder`               | `Optional[Dict[str, Any]]`    | Configura√ß√£o do embedder utilizado pelo agente.                                                                     |
| **Knowledge Sources** _(opcional)_      | `knowledge_sources`      | `Optional[List[BaseKnowledgeSource]]` | Fontes de conhecimento dispon√≠veis para o agente.                                                     |
| **Use System Prompt** _(opcional)_      | `use_system_prompt`      | `Optional[bool]`              | Se deve usar o system prompt (suporte para modelo o1). Padr√£o: True.                                                |

## Criando Agentes

Existem duas maneiras de criar agentes no CrewAI: usando **configura√ß√£o YAML (recomendado)** ou definindo-os **diretamente em c√≥digo**.

### Configura√ß√£o em YAML (Recomendado)

Usar configura√ß√£o em YAML proporciona uma maneira mais limpa e f√°cil de manter para definir agentes. Recomendamos fortemente esse m√©todo em seus projetos CrewAI.

Depois de criar seu projeto CrewAI conforme descrito na se√ß√£o de [Instala√ß√£o](/pt-BR/installation), navegue at√© o arquivo `src/latest_ai_development/config/agents.yaml` e edite o template para atender aos seus requisitos.

<Note>
Vari√°veis em seus arquivos YAML (como `{topic}`) ser√£o substitu√≠das pelos valores fornecidos em seus inputs ao executar o crew:
```python Code
crew.kickoff(inputs={'topic': 'AI Agents'})
```
</Note>

Veja um exemplo de como configurar agentes usando YAML:

```yaml agents.yaml
# src/latest_ai_development/config/agents.yaml
researcher:
  role: >
    {topic} Senior Data Researcher
  goal: >
    Uncover cutting-edge developments in {topic}
  backstory: >
    You're a seasoned researcher with a knack for uncovering the latest
    developments in {topic}. Known for your ability to find the most relevant
    information and present it in a clear and concise manner.

reporting_analyst:
  role: >
    {topic} Reporting Analyst
  goal: >
    Create detailed reports based on {topic} data analysis and research findings
  backstory: >
    You're a meticulous analyst with a keen eye for detail. You're known for
    your ability to turn complex data into clear and concise reports, making
    it easy for others to understand and act on the information you provide.
```

Para usar essa configura√ß√£o YAML no seu c√≥digo, crie uma classe de crew que herda de `CrewBase`:

```python Code
# src/latest_ai_development/crew.py
from crewai import Agent, Crew, Process
from crewai.project import CrewBase, agent, crew
from crewai_tools import SerperDevTool

@CrewBase
class LatestAiDevelopmentCrew():
  """LatestAiDevelopment crew"""

  agents_config = "config/agents.yaml"

  @agent
  def researcher(self) -> Agent:
    return Agent(
      config=self.agents_config['researcher'], # type: ignore[index]
      verbose=True,
      tools=[SerperDevTool()]
    )

  @agent
  def reporting_analyst(self) -> Agent:
    return Agent(
      config=self.agents_config['reporting_analyst'], # type: ignore[index]
      verbose=True
    )
```

<Note>
Os nomes utilizados em seus arquivos YAML (`agents.yaml`) devem ser iguais aos nomes dos m√©todos no seu c√≥digo Python.
</Note>

### Defini√ß√£o Direta em C√≥digo

Voc√™ pode criar agentes diretamente em c√≥digo instanciando a classe `Agent`. Veja um exemplo abrangente mostrando todos os par√¢metros dispon√≠veis:

```python Code
from crewai import Agent
from crewai_tools import SerperDevTool

# Crie um agente com todos os par√¢metros dispon√≠veis
agent = Agent(
    role="Cientista de Dados S√™nior",
    goal="Analisar e interpretar conjuntos de dados complexos para fornecer insights acion√°veis",
    backstory="Com mais de 10 anos de experi√™ncia em ci√™ncia de dados e aprendizado de m√°quina, voc√™ √© especialista em encontrar padr√µes em grandes volumes de dados.",
    llm="gpt-4",  # Padr√£o: OPENAI_MODEL_NAME ou "gpt-4"
    function_calling_llm=None,  # Opcional: LLM separado para chamadas de ferramentas
    verbose=False,  # Padr√£o: False
    allow_delegation=False,  # Padr√£o: False
    max_iter=20,  # Padr√£o: 20 itera√ß√µes
    max_rpm=None,  # Opcional: Limite de requisi√ß√µes por minuto
    max_execution_time=None,  # Opcional: Tempo m√°ximo de execu√ß√£o em segundos
    max_retry_limit=2,  # Padr√£o: 2 tentativas em caso de erro
    allow_code_execution=False,  # Padr√£o: False
    code_execution_mode="safe",  # Padr√£o: "safe" (op√ß√µes: "safe", "unsafe")
    respect_context_window=True,  # Padr√£o: True
    use_system_prompt=True,  # Padr√£o: True
    multimodal=False,  # Padr√£o: False
    inject_date=False,  # Padr√£o: False
    date_format="%Y-%m-%d",  # Padr√£o: formato ISO
    reasoning=False,  # Padr√£o: False
    max_reasoning_attempts=None,  # Padr√£o: None
    tools=[SerperDevTool()],  # Opcional: Lista de ferramentas
    knowledge_sources=None,  # Opcional: Lista de fontes de conhecimento
    embedder=None,  # Opcional: Configura√ß√£o de embedder customizado
    system_template=None,  # Opcional: Template de prompt de sistema
    prompt_template=None,  # Opcional: Template de prompt customizado
    response_template=None,  # Opcional: Template de resposta customizado
    step_callback=None,  # Opcional: Fun√ß√£o de callback para monitoramento
)
```

Vamos detalhar algumas combina√ß√µes de par√¢metros-chave para casos de uso comuns:

#### Agente de Pesquisa B√°sico
```python Code
research_agent = Agent(
    role="Analista de Pesquisa",
    goal="Encontrar e resumir informa√ß√µes sobre t√≥picos espec√≠ficos",
    backstory="Voc√™ √© um pesquisador experiente com aten√ß√£o aos detalhes",
    tools=[SerperDevTool()],
    verbose=True  # Ativa logs para depura√ß√£o
)
```

#### Agente de Desenvolvimento de C√≥digo
```python Code
dev_agent = Agent(
    role="Desenvolvedor Python S√™nior",
    goal="Escrever e depurar c√≥digos Python",
    backstory="Desenvolvedor Python especialista com 10 anos de experi√™ncia",
    allow_code_execution=True,
    code_execution_mode="safe",  # Usa Docker para seguran√ßa
    max_execution_time=300,  # Limite de 5 minutos
    max_retry_limit=3  # Mais tentativas para tarefas complexas
)
```

#### Agente de An√°lise de Longa Dura√ß√£o
```python Code
analysis_agent = Agent(
    role="Analista de Dados",
    goal="Realizar an√°lise aprofundada de grandes conjuntos de dados",
    backstory="Especialista em an√°lise de big data e reconhecimento de padr√µes",
    memory=True,
    respect_context_window=True,
    max_rpm=10,  # Limite de requisi√ß√µes por minuto
    function_calling_llm="gpt-4o-mini"  # Modelo mais econ√¥mico para chamadas de ferramentas
)
```

#### Agente com Template Personalizado
```python Code
custom_agent = Agent(
    role="Atendente de Suporte ao Cliente",
    goal="Auxiliar clientes com suas d√∫vidas e solicita√ß√µes",
    backstory="Experiente em atendimento ao cliente com foco em satisfa√ß√£o",
    system_template="""<|start_header_id|>system<|end_header_id|>\n                        {{ .System }}<|eot_id|>""",
    prompt_template="""<|start_header_id|>user<|end_header_id|>\n                        {{ .Prompt }}<|eot_id|>""",
    response_template="""<|start_header_id|>assistant<|end_header_id|>\n                        {{ .Response }}<|eot_id|>""",
)
```

#### Agente Ciente de Data, com Racioc√≠nio
```python Code
strategic_agent = Agent(
    role="Analista de Mercado",
    goal="Acompanhar movimentos do mercado com refer√™ncias de datas precisas e planejamento estrat√©gico",
    backstory="Especialista em an√°lise financeira sens√≠vel ao tempo e relat√≥rios estrat√©gicos",
    inject_date=True,  # Injeta automaticamente a data atual nas tarefas
    date_format="%d de %B de %Y",  # Exemplo: "21 de maio de 2025"
    reasoning=True,  # Ativa planejamento estrat√©gico
    max_reasoning_attempts=2,  # Limite de itera√ß√µes de planejamento
    verbose=True
)
```

#### Agente de Racioc√≠nio
```python Code
reasoning_agent = Agent(
    role="Planejador Estrat√©gico",
    goal="Analisar problemas complexos e criar planos de execu√ß√£o detalhados",
    backstory="Especialista em planejamento estrat√©gico que desmembra desafios complexos metodicamente",
    reasoning=True,  # Ativa racioc√≠nio e planejamento
    max_reasoning_attempts=3,  # Limite de tentativas de racioc√≠nio
    max_iter=30,  # Permite mais itera√ß√µes para planejamento complexo
    verbose=True
)
```

#### Agente Multimodal
```python Code
multimodal_agent = Agent(
    role="Analista de Conte√∫do Visual",
    goal="Analisar e processar tanto conte√∫do textual quanto visual",
    backstory="Especialista em an√°lise multimodal combinando compreens√£o de texto e imagem",
    multimodal=True,  # Ativa capacidades multimodais
    verbose=True
)
```

### Detalhes dos Par√¢metros

#### Par√¢metros Cr√≠ticos
- `role`, `goal` e `backstory` s√£o obrigat√≥rios e definem o comportamento do agente
- `llm` determina o modelo de linguagem utilizado (padr√£o: GPT-4 da OpenAI)

#### Mem√≥ria e Contexto
- `memory`: Ative para manter o hist√≥rico de conversas
- `respect_context_window`: Evita problemas com limites de tokens
- `knowledge_sources`: Adicione bases de conhecimento espec√≠ficas do dom√≠nio

#### Controle de Execu√ß√£o
- `max_iter`: N√∫mero m√°ximo de tentativas antes da melhor resposta
- `max_execution_time`: Tempo limite em segundos
- `max_rpm`: Limite de requisi√ß√µes por minuto
- `max_retry_limit`: Tentativas de corre√ß√£o em erros

#### Execu√ß√£o de C√≥digo
- `allow_code_execution`: Deve ser True para permitir execu√ß√£o de c√≥digo
- `code_execution_mode`:
  - `"safe"`: Usa Docker (recomendado para produ√ß√£o)
  - `"unsafe"`: Execu√ß√£o direta (apenas em ambientes confi√°veis)

<Note>
  Isso executa uma imagem Docker padr√£o. Se voc√™ deseja configurar a imagem Docker, veja a ferramenta Code Interpreter na se√ß√£o de ferramentas.
  Adicione a ferramenta de interpreta√ß√£o de c√≥digo como um par√¢metro em ferramentas no agente.
</Note>

#### Funcionalidades Avan√ßadas
- `multimodal`: Habilita capacidades multimodais para processar texto e conte√∫do visual
- `reasoning`: Permite que o agente reflita e crie planos antes de executar tarefas
- `inject_date`: Injeta a data atual automaticamente nas descri√ß√µes das tarefas

#### Templates
- `system_template`: Define o comportamento central do agente
- `prompt_template`: Estrutura o formato da entrada
- `response_template`: Formata as respostas do agente

<Note>
Ao usar templates personalizados, assegure-se de definir tanto `system_template` quanto `prompt_template`. O `response_template` √© opcional, mas recomendado para formata√ß√£o consistente de sa√≠da.
</Note>

<Note>
Ao usar templates personalizados, voc√™ pode usar vari√°veis como `{role}`, `{goal}` e `{backstory}` em seus templates. Elas ser√£o automaticamente preenchidas durante a execu√ß√£o.
</Note>

## Ferramentas do Agente

Agentes podem ser equipados com diversas ferramentas para ampliar suas capacidades. O CrewAI suporta ferramentas do:
- [CrewAI Toolkit](https://github.com/joaomdmoura/crewai-tools)
- [LangChain Tools](https://python.langchain.com/docs/integrations/tools)

Veja como adicionar ferramentas a um agente:

```python Code
from crewai import Agent
from crewai_tools import SerperDevTool, WikipediaTools

# Criar ferramentas
search_tool = SerperDevTool()
wiki_tool = WikipediaTools()

# Adicionar ferramentas ao agente
researcher = Agent(
    role="Pesquisador de Tecnologia em IA",
    goal="Pesquisar os √∫ltimos avan√ßos em IA",
    tools=[search_tool, wiki_tool],
    verbose=True
)
```

## Mem√≥ria e Contexto do Agente

Agentes podem manter a mem√≥ria de suas intera√ß√µes e usar contexto de tarefas anteriores. Isto √© especialmente √∫til para fluxos de trabalho complexos onde √© necess√°rio reter informa√ß√µes ao longo de v√°rias tarefas.

```python Code
from crewai import Agent

analyst = Agent(
    role="Analista de Dados",
    goal="Analisar e memorizar padr√µes complexos de dados",
    memory=True,  # Ativa mem√≥ria
    verbose=True
)
```

<Note>
Quando `memory` est√° ativo, o agente manter√° o contexto ao longo de m√∫ltiplas intera√ß√µes, melhorando a capacidade de lidar com tarefas complexas, em m√∫ltiplos passos.
</Note>

## Gerenciamento da Janela de Contexto

O CrewAI inclui um gerenciamento autom√°tico sofisticado de janela de contexto para lidar com situa√ß√µes onde as conversas excedem o limite de tokens do modelo de linguagem. Esse poderoso recurso √© controlado pelo par√¢metro `respect_context_window`.

### Como Funciona o Gerenciamento de Janela de Contexto

Quando o hist√≥rico de conversas de um agente se torna muito grande para a janela de contexto do LLM, o CrewAI detecta essa situa√ß√£o automaticamente e pode:

1. **Resumir o conte√∫do automaticamente** (com `respect_context_window=True`)
2. **Parar a execu√ß√£o com erro** (com `respect_context_window=False`)

### Manipula√ß√£o Autom√°tica de Contexto (`respect_context_window=True`)

Esta √© a **configura√ß√£o padr√£o e recomendada** para a maioria dos casos. Quando ativada, CrewAI ir√°:

```python Code
# Agente com gerenciamento autom√°tico de contexto (padr√£o)
smart_agent = Agent(
    role="Analista de Pesquisa",
    goal="Analisar grandes documentos e conjuntos de dados",
    backstory="Especialista em processar informa√ß√µes extensas",
    respect_context_window=True,  # üîë Padr√£o: gerencia limites de contexto automaticamente
    verbose=True
)
```

**O que acontece quando os limites de contexto s√£o excedidos:**
- ‚ö†Ô∏è **Mensagem de aviso**: `"Context length exceeded. Summarizing content to fit the model context window."`
- üîÑ **Resumir automaticamente**: O CrewAI resume o hist√≥rico da conversa de forma inteligente
- ‚úÖ **Execu√ß√£o cont√≠nua**: A execu√ß√£o da tarefa prossegue normalmente com o contexto resumido
- üìù **Informa√ß√£o preservada**: Informa√ß√µes-chave s√£o mantidas enquanto reduz a contagem de tokens

### Limites Estritos de Contexto (`respect_context_window=False`)

Quando voc√™ precisa de controle total e prefere que a execu√ß√£o pare a perder qualquer informa√ß√£o:

```python Code
# Agente com limites estritos de contexto
strict_agent = Agent(
    role="Legal Document Reviewer",
    goal="Provide precise legal analysis without information loss",
    backstory="Legal expert requiring complete context for accurate analysis",
    respect_context_window=False,  # ‚ùå Stop execution on context limit
    verbose=True
)
```

**O que acontece quando os limites de contexto s√£o excedidos:**
- ‚ùå **Mensagem de erro**: `"Context length exceeded. Consider using smaller text or RAG tools from crewai_tools."`
- üõë **Execu√ß√£o interrompida**: A execu√ß√£o da tarefa √© parada imediatamente
- üîß **Interven√ß√£o manual necess√°ria**: Voc√™ precisar√° modificar sua abordagem

### Como Escolher a Melhor Configura√ß√£o

#### Use `respect_context_window=True` (padr√£o) quando:
- **Processar documentos grandes** que podem ultrapassar os limites de contexto
- **Conversas longas** onde certo grau de resumo √© aceit√°vel
- **Tarefas de pesquisa** onde o contexto geral √© mais importante que detalhes exatos
- **Prototipagem e desenvolvimento** quando se deseja execu√ß√£o robusta

```python Code
# Ideal para processamento de documentos
document_processor = Agent(
    role="Document Analyst",
    goal="Extract insights from large research papers",
    backstory="Expert at analyzing extensive documentation",
    respect_context_window=True,  # Lida com documentos grandes sem problemas
    max_iter=50,  # Permite mais itera√ß√µes para an√°lises complexas
    verbose=True
)
```

#### Use `respect_context_window=False` quando:
- **Precis√£o √© cr√≠tica** e perda de informa√ß√£o √© inaceit√°vel
- **Tarefas jur√≠dicas ou m√©dicas** que requerem contexto completo
- **Revis√£o de c√≥digo** onde detalhes perdidos podem causar bugs
- **An√°lise financeira** onde precis√£o √© fundamental

```python Code
# Ideal para tarefas de precis√£o
precision_agent = Agent(
    role="Code Security Auditor",
    goal="Identify security vulnerabilities in code",
    backstory="Security expert requiring complete code context",
    respect_context_window=False,  # Prefere falhar do que an√°lise incompleta
    max_retry_limit=1,  # Falha r√°pida em caso de problemas de contexto
    verbose=True
)
```

### Abordagens Alternativas para Grandes Volumes de Dados

Ao lidar com conjuntos de dados muito grandes, considere as seguintes estrat√©gias:

#### 1. Use Ferramentas RAG
```python Code
from crewai_tools import RagTool

# Crie uma ferramenta RAG para processamento de documentos grandes
rag_tool = RagTool()

rag_agent = Agent(
    role="Research Assistant",
    goal="Query large knowledge bases efficiently",
    backstory="Expert at using RAG tools for information retrieval",
    tools=[rag_tool],  # Usar RAG ao inv√©s de grandes janelas de contexto
    respect_context_window=True,
    verbose=True
)
```

#### 2. Use Fontes de Conhecimento
```python Code
# Use fontes de conhecimento ao inv√©s de prompts grandes
knowledge_agent = Agent(
    role="Knowledge Expert",
    goal="Answer questions using curated knowledge",
    backstory="Expert at leveraging structured knowledge sources",
    knowledge_sources=[your_knowledge_sources],  # Conhecimento pr√©-processado
    respect_context_window=True,
    verbose=True
)
```

### Boas Pr√°ticas para Janela de Contexto

1. **Monitore o uso de contexto**: Ative `verbose=True` para visualizar o gerenciamento de contexto em a√ß√£o
2. **Otimize para efici√™ncia**: Estruture tarefas para minimizar o ac√∫mulo de contexto
3. **Use modelos apropriados**: Escolha LLMs com janelas de contexto adequadas √† sua tarefa
4. **Teste ambos os modos**: Experimente `True` e `False` para descobrir o que funciona melhor para seu caso
5. **Combine com RAG**: Utilize ferramentas RAG para grandes conjuntos de dados ao inv√©s de depender apenas da janela de contexto

### Solucionando Problemas de Contexto

**Se voc√™ receber erros de limite de contexto:**
```python Code
# Solu√ß√£o r√°pida: Habilite manipula√ß√£o autom√°tica
agent.respect_context_window = True

# Solu√ß√£o melhor: Use ferramentas RAG para dados volumosos
from crewai_tools import RagTool
agent.tools = [RagTool()]

# Alternativa: Divida as tarefas em partes menores
# Ou use fontes de conhecimento no lugar de prompts extensos
```

**Se o resumo autom√°tico perder informa√ß√µes importantes:**
```python Code
# Desative o resumo autom√°tico e use RAG
agent = Agent(
    role="Detailed Analyst",
    goal="Maintain complete information accuracy",
    backstory="Expert requiring full context",
    respect_context_window=False,  # Sem resumo autom√°tico
    tools=[RagTool()],  # Use RAG para grandes volumes de dados
    verbose=True
)
```

<Note>
O recurso de gerenciamento da janela de contexto funciona automaticamente em segundo plano. Voc√™ n√£o precisa chamar fun√ß√µes especiais ‚Äì basta definir `respect_context_window` conforme deseja e o CrewAI cuida do resto!
</Note>

## Considera√ß√µes e Boas Pr√°ticas Importantes

### Seguran√ßa e Execu√ß√£o de C√≥digo
- Ao usar `allow_code_execution`, seja cauteloso com entradas do usu√°rio e sempre as valide
- Use `code_execution_mode: "safe"` (Docker) em ambientes de produ√ß√£o
- Considere definir limites adequados de `max_execution_time` para evitar loops infinitos

### Otimiza√ß√£o de Performance
- Use `respect_context_window: true` para evitar problemas com limite de tokens
- Ajuste `max_rpm` para evitar rate limiting
- Ative `cache: true` para melhorar performance em tarefas repetitivas
- Ajuste `max_iter` e `max_retry_limit` conforme a complexidade da tarefa

### Gerenciamento de Mem√≥ria e Contexto
- Considere `knowledge_sources` para informa√ß√µes espec√≠ficas de dom√≠nio
- Configure `embedder` ao usar modelos de embedding personalizados
- Use templates personalizados (`system_template`, `prompt_template`, `response_template`) para controle fino do comportamento do agente

### Funcionalidades Avan√ßadas
- Ative `reasoning: true` para agentes que precisam planejar e refletir antes de tarefas complexas
- Defina `max_reasoning_attempts` para controlar as itera√ß√µes de planejamento (`None` para ilimitadas)
- Use `inject_date: true` para dar consci√™ncia temporal a agentes em tarefas que dependem de datas
- Personalize o formato de data com `date_format` usando c√≥digos padr√µes do Python datetime
- Ative `multimodal: true` para agentes que precisam processar texto e imagem

### Colabora√ß√£o entre Agentes
- Ative `allow_delegation: true` quando agentes precisarem trabalhar juntos
- Use `step_callback` para monitorar e registrar intera√ß√µes dos agentes
- Considere usar LLMs diferentes para prop√≥sitos distintos:
  - `llm` principal para racioc√≠nio complexo
  - `function_calling_llm` para uso eficiente de ferramentas

### Consci√™ncia de Data e Racioc√≠nio
- Use `inject_date: true` para fornecer consci√™ncia temporal aos agentes em tarefas sens√≠veis ao tempo
- Customize o formato de data com `date_format` usando c√≥digos standards de datetime do Python
- C√≥digos v√°lidos incluem: %Y (ano), %m (m√™s), %d (dia), %B (nome completo do m√™s), etc.
- Formatos de data inv√°lidos ser√£o registrados como avisos e n√£o modificar√£o a descri√ß√£o da tarefa
- Ative `reasoning: true` para tarefas complexas que se beneficiam de planejamento e reflex√£o antecipados

### Compatibilidade de Modelos
- Defina `use_system_prompt: false` para modelos antigos que n√£o suportam mensagens de sistema
- Certifique-se que o `llm` escolhido suporta as funcionalidades necess√°rias (como function calling)

## Solu√ß√£o de Problemas Comuns

1. **Limite de Taxa (Rate Limiting)**: Se atingir limites de API:
   - Implemente o `max_rpm` adequado
   - Use cache para opera√ß√µes repetitivas
   - Considere agrupar requisi√ß√µes em lote

2. **Erros de Janela de Contexto**: Se exceder limites de contexto:
   - Habilite `respect_context_window`
   - Otimize seus prompts
   - Limpe periodicamente a mem√≥ria do agente

3. **Problemas de Execu√ß√£o de C√≥digo**: Se a execu√ß√£o de c√≥digo falhar:
   - Verifique se o Docker est√° instalado para o modo seguro
   - Cheque permiss√µes de execu√ß√£o
   - Revise as configura√ß√µes do sandbox de c√≥digo

4. **Problemas de Mem√≥ria**: Se as respostas do agente parecerem inconsistentes:
   - Cheque a configura√ß√£o das fontes de conhecimento
   - Analise o gerenciamento do hist√≥rico de conversas

Lembre-se de que agentes s√£o mais eficientes quando configurados de acordo com o caso de uso espec√≠fico. Reserve um tempo para entender seus requisitos e ajustar esses par√¢metros conforme necess√°rio.
