---
title: Integra√ß√£o com Weave
description: Saiba como usar o Weights & Biases (W&B) Weave para rastrear, experimentar, avaliar e melhorar suas aplica√ß√µes CrewAI.
icon: radar
---

# Vis√£o Geral do Weave

[Weights & Biases (W&B) Weave](https://weave-docs.wandb.ai/) √© um framework para rastreamento, experimenta√ß√£o, avalia√ß√£o, implementa√ß√£o e aprimoramento de aplica√ß√µes baseadas em LLM.

![Vis√£o geral do uso do tracing do W&B Weave com CrewAI](/images/weave-tracing.gif)

O Weave oferece suporte completo para todas as etapas do desenvolvimento da sua aplica√ß√£o CrewAI:

- **Rastreamento e Monitoramento**: Acompanhe automaticamente chamadas LLM e a l√≥gica da aplica√ß√£o para depura√ß√£o e an√°lise de sistemas em produ√ß√£o
- **Itera√ß√£o Sistem√°tica**: Aperfei√ßoe e itere em prompts, conjuntos de dados e modelos
- **Avalia√ß√£o**: Utilize avaliadores personalizados ou pr√©-constru√≠dos para avaliar e aprimorar sistematicamente o desempenho dos agentes
- **Guardrails**: Proteja seus agentes com salvaguardas pr√© e p√≥s-execu√ß√£o para modera√ß√£o de conte√∫do e seguran√ßa de prompts

O Weave captura automaticamente rastreamentos (traces) de suas aplica√ß√µes CrewAI, permitindo monitorar e analisar o desempenho, as intera√ß√µes e o fluxo de execu√ß√£o dos seus agentes. Isso te ajuda a construir melhores conjuntos de dados para avalia√ß√£o e a otimizar os fluxos de trabalho dos agentes.

## Instru√ß√µes de Configura√ß√£o

<Steps>
    <Step title="Instale os pacotes necess√°rios">
      ```shell
      pip install crewai weave
      ```
    </Step>
    <Step title="Crie uma conta no W&B">
      Cadastre-se em uma [conta Weights & Biases](https://wandb.ai) caso ainda n√£o tenha uma. Voc√™ precisar√° dela para visualizar rastreamentos e m√©tricas.
    </Step>
    <Step title="Inicialize o Weave na sua aplica√ß√£o">
      Adicione o seguinte c√≥digo √† sua aplica√ß√£o:

      ```python
      import weave

      # Inicialize o Weave com o nome do seu projeto
      weave.init(project_name="crewai_demo")
      ```
      
      Ap√≥s a inicializa√ß√£o, o Weave fornecer√° uma URL onde voc√™ poder√° visualizar seus rastreamentos e m√©tricas.
    </Step>
    <Step title="Crie seus Crews/Flows">
      ```python
      from crewai import Agent, Task, Crew, LLM, Process

      # Crie um LLM com temperatura 0 para garantir sa√≠das determin√≠sticas
      llm = LLM(model="gpt-4o", temperature=0)

      # Crie os agentes
      pesquisador = Agent(
          role='Analista de Pesquisa',
          goal='Encontrar e analisar as melhores oportunidades de investimento',
          backstory='Especialista em an√°lise financeira e pesquisa de mercado',
          llm=llm,
          verbose=True,
          allow_delegation=False,
      )

      redator = Agent(
          role='Redator de Relat√≥rios',
          goal='Escrever relat√≥rios de investimento claros e concisos',
          backstory='Experiente na cria√ß√£o de relat√≥rios financeiros detalhados',
          llm=llm,
          verbose=True,
          allow_delegation=False,
      )

      # Crie as tarefas
      pesquisa = Task(
          description='Pesquisa aprofundada sobre o {tema}',
          expected_output='Dados de mercado abrangentes incluindo principais players, tamanho de mercado e tend√™ncias de crescimento.',
          agent=pesquisador
      )

      redacao = Task(
          description='Escreva um relat√≥rio detalhado com base na pesquisa',
          expected_output='O relat√≥rio deve ser f√°cil de ler e entender. Use t√≥picos quando aplic√°vel.',
          agent=redator
      )

      # Crie o crew
      equipe = Crew(
          agents=[pesquisador, redator],
          tasks=[pesquisa, redacao],
          verbose=True,
          process=Process.sequential,
      )

      # Execute o crew
      resultado = equipe.kickoff(inputs={"tema": "IA em ci√™ncia dos materiais"})
      print(resultado)
      ```
    </Step>
    <Step title="Visualize rastreamentos no Weave">
      Ap√≥s executar sua aplica√ß√£o CrewAI, acesse a URL do Weave fornecida durante a inicializa√ß√£o para visualizar:
      - Chamadas LLM e seus metadados
      - Intera√ß√µes dos agentes e fluxo de execu√ß√£o das tarefas
      - M√©tricas de desempenho como lat√™ncia e uso de tokens
      - Quaisquer erros ou problemas ocorridos durante a execu√ß√£o

      <Frame caption="Painel de Rastreamento do Weave">
        <img src="/images/weave-tracing.png" alt="Exemplo de rastreamento do Weave com CrewAI" />
      </Frame>
    </Step>
</Steps>

## Funcionalidades

- O Weave captura automaticamente todas as opera√ß√µes do CrewAI: intera√ß√µes dos agentes e execu√ß√µes das tarefas; chamadas LLM com metadados e uso de tokens; uso de ferramentas e resultados.
- A integra√ß√£o suporta todos os m√©todos de execu√ß√£o do CrewAI: `kickoff()`, `kickoff_for_each()`, `kickoff_async()` e `kickoff_for_each_async()`.
- Rastreamento autom√°tico de todas as [crewAI-tools](https://github.com/crewAIInc/crewAI-tools).
- Suporte ao recurso flow com patching por decorador (`@start`, `@listen`, `@router`, `@or_`, `@and_`).
- Rastreie guardrails personalizados passados para o `Task` do CrewAI com `@weave.op()`.

Para informa√ß√µes detalhadas sobre o que √© suportado, acesse a [documenta√ß√£o do Weave CrewAI](https://weave-docs.wandb.ai/guides/integrations/crewai/#getting-started-with-flow).

## Recursos

- [üìò Documenta√ß√£o do Weave](https://weave-docs.wandb.ai)
- [üìä Exemplo de dashboard Weave x CrewAI](https://wandb.ai/ayut/crewai_demo/weave/traces?cols=%7B%22wb_run_id%22%3Afalse%2C%22attributes.weave.client_version%22%3Afalse%2C%22attributes.weave.os_name%22%3Afalse%2C%22attributes.weave.os_release%22%3Afalse%2C%22attributes.weave.os_version%22%3Afalse%2C%22attributes.weave.source%22%3Afalse%2C%22attributes.weave.sys_version%22%3Afalse%7D&peekPath=%2Fayut%2Fcrewai_demo%2Fcalls%2F0195c838-38cb-71a2-8a15-651ecddf9d89)
- [üê¶ X](https://x.com/weave_wb)