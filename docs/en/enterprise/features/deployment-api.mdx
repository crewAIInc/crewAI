---
title: Deployment API
description: "Trigger deployments programmatically from your CI/CD pipelines"
icon: "code"
mode: "wide"
---

## Overview

The Deployment API enables you to trigger crew redeployments programmatically, allowing seamless integration with CI/CD pipelines like GitHub Actions, Azure DevOps, and other automation tools.

Previously, deployments could only be performed manually via the web interface, which blocked automated releases, controlled versioning, and environment governance. With the Deployment API, you can now:

- **Automate deployments** from your CI/CD pipeline
- **Integrate with version control** to deploy on specific commits or tags
- **Implement environment governance** with approval workflows
- **Enable controlled releases** across development, staging, and production
- **Maintain deployment history** programmatically

<Note>
The Deployment API uses Personal Access Tokens (PATs) for authentication, providing secure, programmatic access to your CrewAI AMP deployments.
</Note>

## Prerequisites

Before using the Deployment API, you'll need:

<CardGroup cols={3}>
  <Card title="Personal Access Token" icon="key">
    Generate a PAT from **Settings > Account** in the CrewAI AMP dashboard
  </Card>
  <Card title="Deployment ID" icon="fingerprint">
    Find this in the **Automations** dashboard for your deployed crew
  </Card>
  <Card title="Permissions" icon="shield-check">
    Your account needs **manage_settings** permission for the deployment
  </Card>
</CardGroup>

### Getting Your Personal Access Token

To generate a Personal Access Token:

1. Navigate to **Settings** in the CrewAI AMP dashboard (click the gear icon in the top right)
2. Go to the **Account** section
3. Find the **Personal Access Tokens** area
4. Click **Generate Token** and save it securely

<Warning>
Personal Access Tokens provide full access to your account. Store them securely in your CI/CD secrets and never commit them to version control.
</Warning>

### Finding Your Deployment ID

Your Deployment ID is available in the Automations dashboard:

1. Navigate to **Automations** in the CrewAI AMP dashboard
2. Find your deployed crew in the list
3. The Deployment ID is displayed in the crew details or can be found in the URL when viewing the deployment

<Tip>
For role-based access control and permission management, see the [RBAC documentation](/en/enterprise/features/rbac).
</Tip>

## Authentication

All API requests require Bearer token authentication using your Personal Access Token:

```bash
Authorization: Bearer pat_YOUR_TOKEN_HERE
```

The PAT token format starts with `pat_` followed by your unique token string.

## API Reference

### Redeploy Endpoint

Trigger a redeployment of your crew to pull the latest code from your repository.

**Endpoint:**
```
POST /crewai_plus/api/v1/deployments/{deployment_id}/redeploy
```

**Base URL:**
```
https://app.crewai.com
```

**Headers:**
```
Authorization: Bearer pat_YOUR_TOKEN
Content-Type: application/json
```

**Path Parameters:**
- `deployment_id` (string, required): The unique identifier of your deployment

**Response Codes:**

| Code | Description |
|------|-------------|
| `200` | Deployment triggered successfully |
| `401` | Authentication failed - invalid or expired token |
| `404` | Deployment not found or insufficient permissions |
| `500` | Server error - contact support if this persists |

**Success Response (200):**
```json
{
  "message": "Deployment triggered successfully",
  "deployment_id": "103671",
  "status": "enqueued"
}
```

**Error Response (401):**
```json
{
  "error": "Authentication failed",
  "message": "Invalid or expired Personal Access Token"
}
```

**Error Response (404):**
```json
{
  "error": "Deployment not found",
  "message": "Deployment ID not found or you don't have access"
}
```

## Code Examples

### cURL Example

```bash
curl -X POST \
  -H "Authorization: Bearer pat_YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  https://app.crewai.com/crewai_plus/api/v1/deployments/YOUR_DEPLOYMENT_ID/redeploy
```

### Python Example

```python
import requests
import os

# Configuration
API_URL = "https://app.crewai.com"
PAT_TOKEN = os.getenv("CREWAI_PAT_TOKEN")  # Store in environment variable
DEPLOYMENT_ID = "YOUR_DEPLOYMENT_ID"

# Build endpoint
endpoint = f"{API_URL}/crewai_plus/api/v1/deployments/{DEPLOYMENT_ID}/redeploy"

# Make request
response = requests.post(
    endpoint,
    headers={
        "Authorization": f"Bearer {PAT_TOKEN}",
        "Content-Type": "application/json"
    }
)

# Handle response
if response.status_code == 200:
    print("âœ… Deployment triggered successfully!")
    result = response.json()
    print(f"Deployment ID: {result.get('deployment_id')}")
    print(f"Status: {result.get('status')}")
elif response.status_code == 401:
    print("âŒ Authentication failed - check your PAT token")
    print(response.json())
elif response.status_code == 404:
    print("âŒ Deployment not found - check your deployment ID and permissions")
    print(response.json())
else:
    print(f"âŒ Error: {response.status_code}")
    print(response.json())
```

## CI/CD Integration

### GitHub Actions Example

Here's a complete GitHub Actions workflow that automatically redeploys your crew when changes are pushed to the main branch:

```yaml
name: Deploy CrewAI to Production

on:
  push:
    branches:
      - main
  workflow_dispatch:  # Allow manual triggering

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Trigger CrewAI Deployment
        env:
          CREWAI_PAT_TOKEN: ${{ secrets.CREWAI_PAT_TOKEN }}
          DEPLOYMENT_ID: ${{ secrets.CREWAI_DEPLOYMENT_ID }}
        run: |
          response=$(curl -s -w "\n%{http_code}" -X POST \
            -H "Authorization: Bearer ${CREWAI_PAT_TOKEN}" \
            -H "Content-Type: application/json" \
            https://app.crewai.com/crewai_plus/api/v1/deployments/${DEPLOYMENT_ID}/redeploy)

          http_code=$(echo "$response" | tail -n1)
          body=$(echo "$response" | sed '$d')

          echo "Response: $body"

          if [ "$http_code" -eq 200 ]; then
            echo "âœ… Deployment triggered successfully"
            exit 0
          else
            echo "âŒ Deployment failed with status code: $http_code"
            exit 1
          fi

      - name: Notify on Success
        if: success()
        run: echo "ðŸš€ CrewAI deployment initiated successfully!"

      - name: Notify on Failure
        if: failure()
        run: echo "âš ï¸ CrewAI deployment failed. Check logs for details."
```

**Setting up GitHub Secrets:**

1. Go to your repository on GitHub
2. Navigate to **Settings > Secrets and variables > Actions**
3. Click **New repository secret**
4. Add two secrets:
   - `CREWAI_PAT_TOKEN`: Your Personal Access Token
   - `CREWAI_DEPLOYMENT_ID`: Your deployment ID

### Azure DevOps Integration

For Azure DevOps Pipelines, you can use a similar approach with Azure Pipeline variables and a Bash or PowerShell script task:

```yaml
trigger:
  branches:
    include:
      - main

pool:
  vmImage: 'ubuntu-latest'

variables:
  - group: crewai-deployment-vars  # Variable group with PAT_TOKEN and DEPLOYMENT_ID

steps:
  - task: Bash@3
    displayName: 'Trigger CrewAI Deployment'
    inputs:
      targetType: 'inline'
      script: |
        curl -X POST \
          -H "Authorization: Bearer $(CREWAI_PAT_TOKEN)" \
          -H "Content-Type: application/json" \
          https://app.crewai.com/crewai_plus/api/v1/deployments/$(DEPLOYMENT_ID)/redeploy
```

<Tip>
Store your PAT token in Azure DevOps Pipeline variables marked as **Secret** to keep them secure.
</Tip>

## Best Practices

### Security

- **Store tokens securely**: Always use CI/CD secrets or environment variables for PAT tokens
- **Never commit tokens**: Add `.env` files to `.gitignore` and audit your repository for exposed tokens
- **Rotate tokens regularly**: Generate new PAT tokens periodically and update your CI/CD secrets
- **Use minimal permissions**: Ensure users and service accounts have only the permissions they need
- **Monitor access**: Review deployment logs regularly to detect unauthorized access

### Deployment Strategy

- **Deploy on merge**: Trigger deployments when pull requests are merged to main/production branches
- **Tag-based deployments**: Use Git tags to deploy specific versions (e.g., `v1.0.0`)
- **Environment-specific workflows**: Create separate workflows for development, staging, and production
- **Add approval gates**: Use GitHub Environments or Azure approvals for production deployments
- **Test before deploy**: Run your test suite before triggering the deployment

### Error Handling

- **Implement retry logic**: Add exponential backoff for transient failures
- **Log all responses**: Capture full response bodies for debugging
- **Set up notifications**: Alert your team when deployments fail
- **Monitor deployment status**: Check the CrewAI dashboard to verify successful deployment
- **Have rollback procedures**: Document how to revert to a previous deployment if needed

## Troubleshooting

### Authentication Errors (401)

If you receive a 401 Unauthorized response:

- **Verify your PAT token**: Ensure the token starts with `pat_` and is complete
- **Check token expiration**: Generate a new token if the old one has expired
- **Confirm account status**: Ensure your CrewAI AMP subscription is active
- **Review token permissions**: Verify the token was created for the correct account

### Deployment Not Found (404)

If you receive a 404 Not Found response:

- **Verify Deployment ID**: Check that the deployment ID is correct in the Automations dashboard
- **Check permissions**: Ensure your account has `manage_settings` permission for this deployment
- **Confirm deployment exists**: Verify the deployment hasn't been deleted
- **Review RBAC settings**: Check role-based access control configurations

### Server Errors (500)

If you receive a 500 Server Error response:

- **Retry the request**: Server errors may be transient
- **Check CrewAI status**: Visit the status page or community forum for known issues
- **Contact support**: If errors persist, reach out to support@crewai.com with the error details
- **Review logs**: Check your deployment logs in the CrewAI dashboard for more information

### CI/CD Pipeline Failures

If your CI/CD pipeline fails:

- **Verify secrets are set**: Ensure `CREWAI_PAT_TOKEN` and `DEPLOYMENT_ID` are configured
- **Check secret names**: Variable names must match exactly (case-sensitive)
- **Review pipeline logs**: Examine the full output for specific error messages
- **Test locally**: Try the curl command locally with the same credentials
- **Validate JSON format**: Ensure request headers and body are properly formatted

<Warning>
If you suspect your PAT token has been compromised, immediately generate a new token and revoke the old one through the CrewAI AMP dashboard.
</Warning>

## Related Documentation

<CardGroup cols={3}>
  <Card title="Deploy Crew" href="/en/enterprise/guides/deploy-crew" icon="rocket">
    Learn how to deploy your crew to CrewAI AMP
  </Card>
  <Card title="Update Crew" href="/en/enterprise/guides/update-crew" icon="pencil">
    Manually update and manage your deployments
  </Card>
  <Card title="Automations" href="/en/enterprise/features/automations" icon="robot">
    Overview of the Automations dashboard and features
  </Card>
  <Card title="RBAC" href="/en/enterprise/features/rbac" icon="shield">
    Configure role-based access control and permissions
  </Card>
  <Card title="Webhook Streaming" href="/en/enterprise/features/webhook-streaming" icon="webhook">
    Stream deployment events to your systems
  </Card>
  <Card title="Need Help?" icon="headset" href="mailto:support@crewai.com">
    Contact support for assistance with the Deployment API
  </Card>
</CardGroup>


