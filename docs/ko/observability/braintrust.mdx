---
title: Braintrust
description: OpenTelemetry ì¶”ì  ë° í‰ê°€ë¥¼ í¬í•¨í•œ CrewAIìš© Braintrust í†µí•©
icon: magnifying-glass-chart
mode: "wide"
---

# Braintrust í†µí•©

ì´ ê°€ì´ë“œëŠ” **Braintrust**ë¥¼ **CrewAI**ì™€ OpenTelemetryë¥¼ ì‚¬ìš©í•˜ì—¬ í¬ê´„ì ì¸ ì¶”ì  ë° í‰ê°€ì™€ í•¨ê»˜ í†µí•©í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ì´ ê°€ì´ë“œë¥¼ ì™„ë£Œí•˜ë©´ CrewAI agentë¥¼ ì¶”ì í•˜ê³ , ì„±ëŠ¥ì„ ëª¨ë‹ˆí„°ë§í•˜ë©°, Braintrustì˜ ê°•ë ¥í•œ ê´€ì°°ì„± í”Œë«í¼ì„ ì‚¬ìš©í•˜ì—¬ ì¶œë ¥ì„ í‰ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **Braintrustë€?** [Braintrust](https://www.braintrust.dev)ëŠ” ë‚´ì¥ëœ ì‹¤í—˜ ì¶”ì  ë° ì„±ëŠ¥ ë¶„ì„ì„ í†µí•´ AI ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ í¬ê´„ì ì¸ ì¶”ì , í‰ê°€ ë° ëª¨ë‹ˆí„°ë§ì„ ì œê³µí•˜ëŠ” AI í‰ê°€ ë° ê´€ì°°ì„± í”Œë«í¼ì…ë‹ˆë‹¤.

## ì‹œì‘í•˜ê¸°

CrewAIë¥¼ ì‚¬ìš©í•˜ê³  í¬ê´„ì ì¸ ê´€ì°°ì„± ë° í‰ê°€ë¥¼ ìœ„í•´ OpenTelemetryë¥¼ í†µí•´ Braintrustì™€ í†µí•©í•˜ëŠ” ê°„ë‹¨í•œ ì˜ˆì œë¥¼ ë‹¨ê³„ë³„ë¡œ ì•ˆë‚´í•©ë‹ˆë‹¤.

### 1ë‹¨ê³„: ì˜ì¡´ì„± ì„¤ì¹˜

```bash
uv add braintrust[otel] crewai crewai-tools opentelemetry-instrumentation-openai opentelemetry-instrumentation-crewai python-dotenv
```

### 2ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

Braintrust API í‚¤ë¥¼ ì„¤ì •í•˜ê³  ì¶”ì ì„ Braintrustë¡œ ì „ì†¡í•˜ë„ë¡ OpenTelemetryë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. Braintrust API í‚¤ì™€ OpenAI API í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤.

```python
import os
from getpass import getpass

# Braintrust ìê²© ì¦ëª… ê°€ì ¸ì˜¤ê¸°
BRAINTRUST_API_KEY = getpass("ğŸ”‘ Braintrust API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”: ")

# ì„œë¹„ìŠ¤ìš© API í‚¤ ê°€ì ¸ì˜¤ê¸°
OPENAI_API_KEY = getpass("ğŸ”‘ OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”: ")

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
os.environ["BRAINTRUST_API_KEY"] = BRAINTRUST_API_KEY
os.environ["BRAINTRUST_PARENT"] = "project_name:crewai-demo"
os.environ["OPENAI_API_KEY"] = OPENAI_API_KEY
```

### 3ë‹¨ê³„: Braintrustì™€ í•¨ê»˜ OpenTelemetry ì´ˆê¸°í™”í•˜ê¸°

ì¶”ì ì„ ìº¡ì²˜í•˜ê³  Braintrustë¡œ ì „ì†¡í•˜ê¸° ì‹œì‘í•˜ë„ë¡ Braintrust OpenTelemetry ê³„ì¸¡ì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

```python
import os
from typing import Any, Dict

from braintrust.otel import BraintrustSpanProcessor
from crewai import Agent, Crew, Task
from crewai.llm import LLM
from opentelemetry import trace
from opentelemetry.instrumentation.crewai import CrewAIInstrumentor
from opentelemetry.instrumentation.openai import OpenAIInstrumentor
from opentelemetry.sdk.trace import TracerProvider

def setup_tracing() -> None:
    """Braintrustì™€ í•¨ê»˜ OpenTelemetry ì¶”ì  ì„¤ì •."""
    current_provider = trace.get_tracer_provider()
    if isinstance(current_provider, TracerProvider):
        provider = current_provider
    else:
        provider = TracerProvider()
        trace.set_tracer_provider(provider)

    provider.add_span_processor(BraintrustSpanProcessor())
    CrewAIInstrumentor().instrument(tracer_provider=provider)
    OpenAIInstrumentor().instrument(tracer_provider=provider)


setup_tracing()
```

### 4ë‹¨ê³„: CrewAI ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±í•˜ê¸°

í¬ê´„ì ì¸ ì¶”ì ì´ í™œì„±í™”ëœ CrewAI ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìƒì„±í•©ë‹ˆë‹¤.

```python
from crewai import Agent, Crew, Process, Task
from crewai_tools import SerperDevTool

def create_crew() -> Crew:
    """í¬ê´„ì ì¸ ì¶”ì ì„ ìœ„í•œ ë‹¤ì¤‘ agentê°€ ìˆëŠ” crew ìƒì„±."""
    llm = LLM(model="gpt-4o-mini")
    search_tool = SerperDevTool()

    # íŠ¹ì • ì—­í• ì„ ê°€ì§„ agent ì •ì˜
    researcher = Agent(
        role="ì‹œë‹ˆì–´ ì—°êµ¬ ë¶„ì„ê°€",
        goal="AI ë° ë°ì´í„° ê³¼í•™ì˜ ìµœì²¨ë‹¨ ë°œì „ ì‚¬í•­ ë°œê²¬",
        backstory="""ë‹¹ì‹ ì€ ìµœê³  ìˆ˜ì¤€ì˜ ê¸°ìˆ  ì‹±í¬íƒ±í¬ì—ì„œ ê·¼ë¬´í•©ë‹ˆë‹¤.
        ìƒˆë¡œìš´ íŠ¸ë Œë“œë¥¼ ì‹ë³„í•˜ëŠ” ë° ì „ë¬¸ì„±ì´ ìˆìŠµë‹ˆë‹¤.
        ë³µì¡í•œ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³  ì‹¤í–‰ ê°€ëŠ¥í•œ ì¸ì‚¬ì´íŠ¸ë¡œ ì œì‹œí•˜ëŠ” ë° ë›°ì–´ë‚©ë‹ˆë‹¤.""",
        verbose=True,
        allow_delegation=False,
        llm=llm,
        tools=[search_tool],
    )

    writer = Agent(
        role="ê¸°ìˆ  ì½˜í…ì¸  ì „ëµê°€",
        goal="ê¸°ìˆ  ë°œì „ì— ëŒ€í•œ ë§¤ë ¥ì ì¸ ì½˜í…ì¸  ì‘ì„±",
        backstory="""ë‹¹ì‹ ì€ í†µì°°ë ¥ ìˆê³  í¥ë¯¸ë¡œìš´ ê¸°ì‚¬ë¡œ ìœ ëª…í•œ ì½˜í…ì¸  ì „ëµê°€ì…ë‹ˆë‹¤.
        ë³µì¡í•œ ê°œë…ì„ ë§¤ë ¥ì ì¸ ìŠ¤í† ë¦¬ë¡œ ì „í™˜í•©ë‹ˆë‹¤.""",
        verbose=True,
        allow_delegation=True,
        llm=llm,
    )

    # agentë¥¼ ìœ„í•œ ì‘ì—… ìƒì„±
    research_task = Task(
        description="""{topic} ë¶„ì•¼ì˜ ìµœì‹  ë°œì „ ìƒí™©ì— ëŒ€í•œ í¬ê´„ì ì¸ ë¶„ì„ì„ ìˆ˜í–‰í•˜ì„¸ìš”.
        ì£¼ìš” íŠ¸ë Œë“œ, íšê¸°ì  ê¸°ìˆ , ì‚°ì—…ì— ë¯¸ì¹  ì ì¬ì  ì˜í–¥ì„ ì‹ë³„í•˜ì„¸ìš”.""",
        expected_output="ì£¼ìš” ë‚´ìš©ì„ ë¶ˆë¦¿ í¬ì¸íŠ¸ë¡œ ì •ë¦¬í•œ ì „ì²´ ë¶„ì„ ë³´ê³ ì„œ",
        agent=researcher,
    )

    writing_task = Task(
        description="""ì œê³µëœ ì¸ì‚¬ì´íŠ¸ë¥¼ í™œìš©í•˜ì—¬
        ê°€ì¥ ì¤‘ìš”í•œ {topic} ë°œì „ ë‚´ìš©ì„ ê°•ì¡°í•˜ëŠ” í¥ë¯¸ë¡œìš´ ë¸”ë¡œê·¸ ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”.
        ê¸€ì€ ì •ë³´ì„± ìˆê³ , ê¸°ìˆ ì— ë°ì€ ë…ìë¥¼ ëŒ€ìƒìœ¼ë¡œ í•˜ë©´ì„œ ì½ê¸° ì‰½ê²Œ ì¨ì•¼ í•©ë‹ˆë‹¤.
        ë©‹ì§€ê²Œ ë“¤ë¦¬ë„ë¡ ì“°ë˜, ë³µì¡í•œ ë‹¨ì–´ëŠ” í”¼í•˜ì—¬ AIì²˜ëŸ¼ ë“¤ë¦¬ì§€ ì•Šê²Œ í•˜ì„¸ìš”.""",
        expected_output="ìµœì†Œ 4ê°œì˜ ë‹¨ë½ìœ¼ë¡œ êµ¬ì„±ëœ ì „ì²´ ë¸”ë¡œê·¸ ê¸€",
        agent=writer,
        context=[research_task],
    )

    # ìˆœì°¨ í”„ë¡œì„¸ìŠ¤ ë°©ì‹ìœ¼ë¡œ crew ì¸ìŠ¤í„´ìŠ¤í™”
    crew = Crew(
        agents=[researcher, writer], 
        tasks=[research_task, writing_task], 
        verbose=True, 
        process=Process.sequential
    )

    return crew

def run_crew():
    """crewë¥¼ ì‹¤í–‰í•˜ê³  ê²°ê³¼ ë°˜í™˜."""
    crew = create_crew()
    result = crew.kickoff(inputs={"topic": "AI ë°œì „"})
    return result

# crew ì‹¤í–‰
if __name__ == "__main__":
    # ì´ ëª¨ë“ˆì—ì„œ ê³„ì¸¡ì´ ì´ë¯¸ ì´ˆê¸°í™”ë¨
    result = run_crew()
    print(result)
```

### 5ë‹¨ê³„: Braintrustì—ì„œ ì¶”ì  ë³´ê¸°

crewë¥¼ ì‹¤í–‰í•œ í›„, Braintrustì—ì„œ ë‹¤ì–‘í•œ ê´€ì ìœ¼ë¡œ í¬ê´„ì ì¸ ì¶”ì ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

<Tabs>
  <Tab title="ì¶”ì (Trace)">
    <Frame>
      <img src="/images/braintrust-trace-view.png" alt="Braintrust Trace View"/>
    </Frame>
  </Tab>
  
  <Tab title="íƒ€ì„ë¼ì¸(Timeline)">
    <Frame>
      <img src="/images/braintrust-timeline-view.png" alt="Braintrust Timeline View"/>
    </Frame>
  </Tab>
  
  <Tab title="ìŠ¤ë ˆë“œ(Thread)">
    <Frame>
      <img src="/images/braintrust-thread-view.png" alt="Braintrust Thread View"/>
    </Frame>
  </Tab>
</Tabs>

### 6ë‹¨ê³„: SDKë¥¼ í†µí•œ í‰ê°€ (ì‹¤í—˜)

Braintrustì˜ Eval SDKë¥¼ ì‚¬ìš©í•˜ì—¬ í‰ê°€ë¥¼ ì‹¤í–‰í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë²„ì „ì„ ë¹„êµí•˜ê±°ë‚˜ ì¶œë ¥ì„ ì˜¤í”„ë¼ì¸ìœ¼ë¡œ ì ìˆ˜í™”í•˜ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤. ì•„ë˜ëŠ” ìœ„ì—ì„œ ìƒì„±í•œ crewë¥¼ ì‚¬ìš©í•˜ëŠ” Python ì˜ˆì œì…ë‹ˆë‹¤:

```python
from braintrust import Eval
from autoevals import Levenshtein

def evaluate_crew_task(input_data):
    """crewë¥¼ í‰ê°€í•˜ê¸° ìœ„í•´ ê°ì‹¸ëŠ” ì‘ì—… í•¨ìˆ˜."""
    crew = create_crew()
    result = crew.kickoff(inputs={"topic": input_data["topic"]})
    return str(result)

Eval(
    "AI ì—°êµ¬ Crew",  # í”„ë¡œì íŠ¸ ì´ë¦„
    {
        "data": lambda: [
            {"topic": "artificial intelligence trends 2024"},
            {"topic": "machine learning breakthroughs"},
            {"topic": "AI ethics and governance"},
        ],
        "task": evaluate_crew_task,
        "scores": [Levenshtein],
    },
)
```

API í‚¤ë¥¼ ì„¤ì •í•˜ê³  ì‹¤í–‰:

```bash
export BRAINTRUST_API_KEY="YOUR_API_KEY"
braintrust eval eval_crew.py
```

ìì„¸í•œ ë‚´ìš©ì€ [Braintrust Eval SDK ê°€ì´ë“œ](https://www.braintrust.dev/docs/start/eval-sdk)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### Braintrust í†µí•©ì˜ ì£¼ìš” ê¸°ëŠ¥

- **í¬ê´„ì ì¸ ì¶”ì **: ëª¨ë“  agent ìƒí˜¸ì‘ìš©, ë„êµ¬ ì‚¬ìš© ë° LLM í˜¸ì¶œ ì¶”ì 
- **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: ì‹¤í–‰ ì‹œê°„, í† í° ì‚¬ìš©ëŸ‰ ë° ì„±ê³µë¥  ëª¨ë‹ˆí„°ë§
- **ì‹¤í—˜ ì¶”ì **: ë‹¤ë¥¸ crew êµ¬ì„± ë° ëª¨ë¸ ë¹„êµ
- **ìë™í™”ëœ í‰ê°€**: crew ì¶œë ¥ì— ëŒ€í•œ ì‚¬ìš©ì ì •ì˜ í‰ê°€ ë©”íŠ¸ë¦­ ì„¤ì •
- **ì˜¤ë¥˜ ì¶”ì **: crew ì‹¤í–‰ ì „ë°˜ì— ê±¸ì¹œ ì‹¤íŒ¨ ëª¨ë‹ˆí„°ë§ ë° ë””ë²„ê¹…
- **ë¹„ìš© ë¶„ì„**: í† í° ì‚¬ìš©ëŸ‰ ë° ê´€ë ¨ ë¹„ìš© ì¶”ì 

### ë²„ì „ í˜¸í™˜ì„± ì •ë³´
- Python 3.8+
- CrewAI >= 0.86.0
- Braintrust >= 0.1.0
- OpenTelemetry SDK >= 1.31.0

### ì°¸ê³  ìë£Œ
- [Braintrust ë¬¸ì„œ](https://www.braintrust.dev/docs) - Braintrust í”Œë«í¼ ê°œìš”
- [Braintrust CrewAI í†µí•©](https://www.braintrust.dev/docs/integrations/crew-ai) - ê³µì‹ CrewAI í†µí•© ê°€ì´ë“œ
- [Braintrust Eval SDK](https://www.braintrust.dev/docs/start/eval-sdk) - SDKë¥¼ í†µí•œ ì‹¤í—˜ ì‹¤í–‰
- [CrewAI ë¬¸ì„œ](https://docs.crewai.com/) - CrewAI í”„ë ˆì„ì›Œí¬ ê°œìš”
- [OpenTelemetry ë¬¸ì„œ](https://opentelemetry.io/docs/) - OpenTelemetry ê°€ì´ë“œ
- [Braintrust GitHub](https://github.com/braintrustdata/braintrust) - Braintrust SDK ì†ŒìŠ¤ ì½”ë“œ
